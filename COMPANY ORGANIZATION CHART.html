<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Company Structure â€“ Futuristic Animated Org Chart</title>
  <meta name="description" content="Futuristic, animated organization chart with glassmorphism and smooth interactions." />
  <style>
    :root {
      --primary: #8B4513;   /* SaddleBrown */
      --secondary: #D2B48C; /* Tan */
      --dark: #441102;      /* Deep brown-red */
      --light: #F5F5F0;     /* Off-white */
      --accent: #CD853F;    /* Peru */

      --bg-grad-1: #1d0f0a;
      --bg-grad-2: #2b1408;
      --glass: rgba(245,245,240,0.08);
      --blur: blur(10px);
      --radius: 18px;
      --ring: 0 0 0 1px rgba(210,180,140,0.35), 0 8px 30px rgba(205,133,63,0.15);
      
      /* New variables for enhanced design */
      --transition: all 0.3s ease;
      --glow: 0 0 15px rgba(210, 180, 140, 0.4);
    }

    /* Global reset */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 10% -10%, var(--bg-grad-2), transparent),
                  radial-gradient(1200px 800px at 110% 10%, #3a1608, transparent),
                  linear-gradient(180deg, var(--bg-grad-1), #110704 65%);
      color: var(--light);
      overflow-x: hidden;
    }

    a { color: var(--secondary); text-decoration: none; transition: var(--transition); }
    a:hover { color: var(--accent); }
    img { max-width: 100%; display: block; }

    /* Floating particles */
    .particles {
      position: fixed; inset: 0; pointer-events: none; z-index: 0;
      background: repeating-radial-gradient(circle at 20% 30%, rgba(210,180,140,0.08) 0 1px, transparent 1px 40px),
                  repeating-radial-gradient(circle at 80% 70%, rgba(205,133,63,0.06) 0 1px, transparent 1px 45px);
      animation: drift 40s linear infinite;
      opacity: .5;
      filter: saturate(1.1);
    }
    @keyframes drift { to { transform: translate3d(-2%, -2%, 0) scale(1.02); } }

    /* Header */
    header {
      position: relative; z-index: 1; padding: 72px 20px 36px; text-align: center;
    }
    .logo {
      display: inline-flex; align-items: center; gap: 12px; padding: 10px 14px;
      background: linear-gradient(180deg, rgba(245,245,240,0.08), rgba(245,245,240,0.02));
      border-radius: 999px; box-shadow: var(--ring);
      backdrop-filter: var(--blur);
      transition: var(--transition);
    }
    .logo:hover {
      box-shadow: 0 0 0 1px rgba(210,180,140,0.5), 0 8px 30px rgba(205,133,63,0.25);
      transform: translateY(-2px);
    }
    .logo-mark {
      width: 18px; height: 18px; border-radius: 6px; background: linear-gradient(135deg, var(--accent), var(--secondary));
      box-shadow: 0 0 0 3px rgba(205,133,63,0.35), 0 10px 25px rgba(139,69,19,0.35);
      animation: pulse 2.4s ease-in-out infinite;
    }
    @keyframes pulse { 
      0% { transform: scale(1); }
      50% { transform: scale(1.08); filter: drop-shadow(0 0 12px rgba(210,180,140,.45)); }
      100% { transform: scale(1); }
    }

    h1.title {
      margin: 18px auto 10px; font-weight: 800; letter-spacing: 0.5px; line-height: 1.05;
      font-size: clamp(28px, 5.2vw, 64px);
      background: linear-gradient(180deg, var(--light), #e8e1d4 60%, #bfa27a);
      color: transparent; -webkit-background-clip: text; background-clip: text;
      filter: drop-shadow(0 8px 30px rgba(205,133,63,.15));
    }
    .subtitle {
      color: #e7e0d7; opacity: .8; max-width: 820px; margin: 0 auto;
      font-size: clamp(14px, 2.2vw, 18px);
      line-height: 1.5;
    }

    /* Section container */
    .container { max-width: 1200px; margin: 0 auto; padding: 24px; position: relative; z-index: 1; }

    /* Control bar */
    .toolbar {
      display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: center; margin: 18px auto 28px;
    }
    .btn {
      cursor: pointer; border: 0; padding: 10px 14px; border-radius: 999px; font-weight: 600;
      color: var(--dark); background: linear-gradient(180deg, var(--secondary), #c9a879);
      box-shadow: 0 6px 18px rgba(205,133,63,.25), inset 0 0 0 1px rgba(139,69,19,.35);
      transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
    }
    .btn:hover { 
      transform: translateY(-1px); 
      box-shadow: 0 10px 24px rgba(205,133,63,.35); 
      filter: saturate(1.1); 
    }
    .btn.alt { 
      color: var(--secondary); 
      background: linear-gradient(180deg, rgba(245,245,240,.1), rgba(245,245,240,.04)); 
      backdrop-filter: var(--blur); 
      box-shadow: var(--ring); 
    }
    .btn.alt:hover {
      background: linear-gradient(180deg, rgba(245,245,240,.15), rgba(245,245,240,.08));
      box-shadow: 0 0 0 1px rgba(210,180,140,0.5), 0 8px 30px rgba(205,133,63,0.25);
    }

    /* Search bar */
    .search-container {
      position: relative;
      margin: 0 auto 20px;
      max-width: 500px;
    }
    .search-input {
      width: 100%;
      padding: 12px 20px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(180deg, rgba(245,245,240,.1), rgba(245,245,240,.04));
      color: var(--light);
      backdrop-filter: var(--blur);
      box-shadow: var(--ring);
      transition: var(--transition);
    }
    .search-input:focus {
      outline: none;
      box-shadow: 0 0 0 2px var(--secondary), var(--ring);
    }
    .search-input::placeholder {
      color: rgba(245,245,240,0.6);
    }

    /* ORG CHART */
    .chart-wrap {
      position: relative; isolation: isolate; overflow: hidden; border-radius: var(--radius);
      padding: 30px; background: linear-gradient(180deg, rgba(245,245,240,.06), rgba(245,245,240,.02));
      box-shadow: var(--ring);
      transition: var(--transition);
    }
    .chart-wrap:hover {
      box-shadow: 0 0 0 1px rgba(210,180,140,0.5), 0 12px 40px rgba(205,133,63,0.2);
    }

    .chart {
      position: relative; min-height: 520px;
      transform-origin: top left; transition: transform .35s ease;
    }

    .node {
      position: absolute; padding: 12px 14px; border-radius: 14px; min-width: 180px; text-align: center;
      background: linear-gradient(180deg, rgba(245,245,240,0.12), rgba(245,245,240,0.04));
      border: 1px solid rgba(210,180,140,.35);
      backdrop-filter: var(--blur);
      color: var(--light); font-weight: 700; letter-spacing: .3px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      user-select: none; -webkit-user-select: none;
      animation: rise .6s ease forwards; transform: translateY(12px) scale(.98); opacity: 0;
      transition: var(--transition);
      z-index: 10;
      cursor: pointer;
    }
    .node.small { font-weight: 600; font-size: 14px; min-width: 150px; }
    .node.tiny { font-weight: 600; font-size: 13px; min-width: 130px; padding: 10px 12px; }

    @keyframes rise { 
      to { transform: none; opacity: 1; } 
    }

    .node.primary { 
      border-color: var(--secondary); 
      box-shadow: 0 0 0 1px rgba(210,180,140,.5), 0 20px 60px rgba(205,133,63,.22); 
    }
    .node.accent  { border-color: var(--accent); }
    .node.dark    { background: linear-gradient(180deg, rgba(68,17,2,.75), rgba(68,17,2,.55)); border-color: rgba(210,180,140,.3); }

    .node::after { /* subtle glow */
      content: ""; position: absolute; inset: -1px; border-radius: inherit; pointer-events: none;
      background: radial-gradient(700px 100px at 50% -10%, rgba(210,180,140,.18), transparent 60%);
      mix-blend-mode: screen; opacity: .9;
      transition: var(--transition);
    }

    .node .sub { display: block; margin-top: 4px; font-weight: 500; opacity: .8; font-size: 12px; }

    .node:hover { 
      transform: translateY(-4px) scale(1.02); 
      box-shadow: var(--glow), 0 12px 40px rgba(0,0,0,.3);
      z-index: 20;
    }
    .node:hover::after {
      opacity: 1;
      background: radial-gradient(700px 100px at 50% -10%, rgba(210,180,140,.25), transparent 60%);
    }

    /* Node detail modal */
    .node-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: linear-gradient(180deg, rgba(245,245,240,0.12), rgba(245,245,240,0.04));
      backdrop-filter: var(--blur);
      border: 1px solid rgba(210,180,140,.35);
      border-radius: var(--radius);
      padding: 24px;
      max-width: 500px;
      width: 90%;
      box-shadow: var(--ring), var(--glow);
      position: relative;
    }
    .close-modal {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      color: var(--secondary);
      font-size: 24px;
      cursor: pointer;
      transition: var(--transition);
    }
    .close-modal:hover {
      color: var(--accent);
      transform: rotate(90deg);
    }
    .modal-title {
      margin-top: 0;
      color: var(--secondary);
      border-bottom: 1px solid rgba(210,180,140,.3);
      padding-bottom: 10px;
    }

    /* SVG connectors */
    svg.lines { position: absolute; inset: 0; pointer-events: none; z-index: 0; filter: drop-shadow(0 6px 10px rgba(0,0,0,.5)); }
    .lines path { stroke: url(#gradStroke); stroke-width: 2; fill: none; transition: var(--transition); }

    /* Reference image frame */
    .reference {
      margin-top: 24px; display: grid; gap: 14px;
    }
    .ref-card {
      background: linear-gradient(180deg, rgba(245,245,240,.08), rgba(245,245,240,.03)); border: 1px solid rgba(210,180,140,.35);
      border-radius: var(--radius); padding: 14px; box-shadow: var(--ring); backdrop-filter: var(--blur);
      transition: var(--transition);
    }
    .ref-card:hover {
      box-shadow: 0 0 0 1px rgba(210,180,140,0.5), 0 8px 30px rgba(205,133,63,0.2);
    }
    .ref-card h3 { margin: 4px 0 10px; font-size: 14px; font-weight: 800; letter-spacing: .4px; color: var(--secondary); }

    /* Footer */
    footer { text-align: center; opacity: .8; padding: 36px 12px 56px; font-size: 14px; }

    /* Responsive */
    @media (max-width: 900px) {
      .chart { min-height: 720px; }
      .node { min-width: 160px; }
      .node.small { min-width: 130px; }
      .node.tiny { min-width: 110px; font-size: 12px; }
    }

    @media (max-width: 600px) {
      .toolbar { flex-direction: column; }
      .btn { width: 100%; }
      .chart-wrap { padding: 15px; }
    }
  </style>
</head>
<body>
  <div class="particles" aria-hidden="true"></div>
  <header>
    <div class="logo">
      <span class="logo-mark"></span>
      <strong>Alâ€‘Ahlia Contracting Group</strong>
    </div>
    <h1 class="title">Company Structure</h1>
    <p class="subtitle">A sleek, interactive organization chart with glassmorphism, motion, and your brand palette â€” optimized for presentations and the web.</p>
  </header>

  <main class="container">
    <div class="search-container">
      <input type="text" class="search-input" id="searchNode" placeholder="Search departments or roles...">
    </div>

    <div class="toolbar">
      <button class="btn" id="zoomIn">Zoom In</button>
      <button class="btn alt" id="zoomReset">Reset</button>
      <button class="btn" id="zoomOut">Zoom Out</button>
      <button class="btn alt" id="toggleDetails">Toggle Details</button>
    </div>

    <section class="chart-wrap">
      <!-- SVG lines get drawn underneath nodes -->
      <svg class="lines" viewBox="0 0 1600 1000" preserveAspectRatio="none">
        <defs>
          <linearGradient id="gradStroke" x1="0" x2="1" y1="0" y2="1">
            <stop offset="0%" stop-color="var(--secondary)" stop-opacity="0.85" />
            <stop offset="50%" stop-color="var(--accent)" stop-opacity="0.9" />
            <stop offset="100%" stop-color="var(--primary)" stop-opacity="0.85" />
          </linearGradient>
        </defs>
        <g id="paths"></g>
      </svg>

      <!-- Nodes (edit text freely; positions are set via data-x/y) -->
      <div class="chart" id="chart">
        <div class="node primary" data-id="council" data-x="620" data-y="0">COUNCIL OF PARTNERS</div>
        <div class="node primary" data-id="mp" data-x="680" data-y="90">MANAGING PARTNER</div>
        <div class="node" data-id="mgmt" data-x="600" data-y="180">MANAGEMENT GROUP</div>

        <div class="node accent" data-id="admin" data-x="140" data-y="280">ADMINISTRATION<span class="sub">(Office Mgmt, HR/IT, Legal)</span></div>
        <div class="node accent" data-id="const" data-x="600" data-y="280">CONSTRUCTION MANAGEMENT</div>
        <div class="node accent" data-id="finance" data-x="1060" data-y="280">FINANCIAL MANAGEMENT</div>

        <div class="node small" data-id="projConst" data-x="320" data-y="380">PROJECT CONSTRUCTION Dept.</div>
        <div class="node small" data-id="plan" data-x="560" data-y="380">PRICING & PLANNING Dept.</div>
        <div class="node small" data-id="design" data-x="740" data-y="380">DESIGN Dept.</div>
        <div class="node small" data-id="hse" data-x="920" data-y="380">HEALTH & SAFETY Dept.</div>
        <div class="node small" data-id="finMgr" data-x="1060" data-y="380">FINANCIAL MANAGER</div>

        <div class="node tiny" data-id="land" data-x="220" data-y="490">LAND SURVEYORS</div>
        <div class="node tiny" data-id="site" data-x="360" data-y="490">SITE ENGINEERS</div>
        <div class="node tiny" data-id="qty" data-x="500" data-y="490">QUANTITY SURVEYORS</div>

        <div class="node tiny" data-id="shop" data-x="740" data-y="490">SHOPDRAWING</div>
        <div class="node tiny" data-id="dev" data-x="860" data-y="490">DESIGN DEVELOPMENT</div>

        <div class="node tiny" data-id="equipStores" data-x="640" data-y="600">EQUIPMENT & STORES</div>
        <div class="node tiny" data-id="procure" data-x="820" data-y="600">PROCUREMENT</div>
        <div class="node tiny" data-id="acct" data-x="1000" data-y="600">ACCOUNTING</div>
        <div class="node tiny" data-id="audit" data-x="1180" data-y="600">INTERNAL AUDITING</div>
        <div class="node tiny" data-id="treasury" data-x="1360" data-y="600">TREASURY</div>

        <div class="node tiny dark" data-id="equipment" data-x="620" data-y="710">EQUIPMENT</div>
        <div class="node tiny dark" data-id="stores" data-x="740" data-y="710">STORES</div>

      </div>
    </section>

    <!-- Node Detail Modal -->
    <div class="node-modal" id="nodeModal">
      <div class="modal-content">
        <button class="close-modal" id="closeModal">&times;</button>
        <h2 class="modal-title" id="modalNodeTitle">Node Title</h2>
        <div id="modalNodeContent">
          <p>Detailed information about this department or role would appear here.</p>
        </div>
      </div>
    </div>

    <div class="reference">
      <div class="ref-card">
        <h3>Reference Chart (optional)</h3>
        <p style="opacity:.8;margin:6px 0 10px">If you have a static PNG/JPG of the structure, place it alongside this interactive version.</p>
        <img alt="Company Organization Chart" src="Company-Organization-Chart_A4.jpg" onerror="this.parentElement.style.display='none'" />
      </div>
    </div>
  </main>

  <footer>
    <small>Palette â€” Primary: <code>#8B4513</code>, Secondary: <code>#D2B48C</code>, Dark: <code>#441102</code>, Light: <code>#F5F5F0</code>, Accent: <code>#CD853F</code></small>
  </footer>

  <script>
    // Utility: position nodes and draw elegant curved lines between parents and children
    (function(){
      const chart = document.getElementById('chart');
      const pathsGroup = document.getElementById('paths');
      const searchInput = document.getElementById('searchNode');
      const toggleDetailsBtn = document.getElementById('toggleDetails');
      const nodeModal = document.getElementById('nodeModal');
      const closeModal = document.getElementById('closeModal');
      const modalNodeTitle = document.getElementById('modalNodeTitle');
      const modalNodeContent = document.getElementById('modalNodeContent');

      // Node details data (would typically come from a database in a real application)
      const nodeDetails = {
        council: {
          title: "COUNCIL OF PARTNERS",
          content: "<p>The governing body responsible for strategic decisions and overall company direction. Comprised of founding partners and key stakeholders.</p>"
        },
        mp: {
          title: "MANAGING PARTNER",
          content: "<p>Executive leadership role overseeing all company operations and implementing strategies set by the Council of Partners.</p>"
        },
        // Add details for other nodes as needed
      };

      // Default node detail for nodes without specific information
      const defaultNodeDetail = {
        content: "<p>Select a node to view detailed information about this department or role.</p>"
      };

      // Declarative edges
      const edges = [
        ['council','mp'], ['mp','mgmt'],
        ['mgmt','admin'], ['mgmt','const'], ['mgmt','finance'],
        ['const','projConst'], ['const','plan'], ['const','design'], ['const','hse'],
        ['finance','finMgr'],
        ['projConst','land'], ['projConst','site'], ['projConst','qty'],
        ['design','shop'], ['design','dev'],
        ['const','equipStores'], ['const','procure'], ['finance','acct'], ['finance','audit'], ['finance','treasury'],
        ['equipStores','equipment'], ['equipStores','stores']
      ];

      // Apply absolute positions from data-x/y
      const nodes = Array.from(chart.querySelectorAll('.node'));
      const byId = {};
      nodes.forEach((el, i) => {
        el.style.left = (parseFloat(el.dataset.x)||0) + 'px';
        el.style.top  = (parseFloat(el.dataset.y)||0) + 'px';
        el.style.zIndex = 10;
        byId[el.dataset.id] = el;
        // Staggered animation delay
        el.style.animationDelay = (i * 40) + 'ms';
        
        // Add click event to show node details
        el.addEventListener('click', () => {
          const nodeId = el.dataset.id;
          const detail = nodeDetails[nodeId] || defaultNodeDetail;
          
          modalNodeTitle.textContent = el.textContent;
          modalNodeContent.innerHTML = detail.content || defaultNodeDetail.content;
          
          nodeModal.style.display = 'flex';
        });
      });

      // Close modal when clicking close button
      closeModal.addEventListener('click', () => {
        nodeModal.style.display = 'none';
      });

      // Close modal when clicking outside content
      nodeModal.addEventListener('click', (e) => {
        if (e.target === nodeModal) {
          nodeModal.style.display = 'none';
        }
      });

      // Search functionality
      searchInput.addEventListener('input', () => {
        const searchTerm = searchInput.value.toLowerCase();
        
        nodes.forEach(node => {
          const nodeText = node.textContent.toLowerCase();
          if (searchTerm === '' || nodeText.includes(searchTerm)) {
            node.style.opacity = '1';
            node.style.zIndex = '10';
            node.style.boxShadow = '0 10px 30px rgba(0,0,0,.25)';
          } else {
            node.style.opacity = '0.3';
            node.style.zIndex = '5';
            node.style.boxShadow = 'none';
          }
        });
      });

      // Toggle details view
      let detailsVisible = true;
      toggleDetailsBtn.addEventListener('click', () => {
        detailsVisible = !detailsVisible;
        const subElements = document.querySelectorAll('.node .sub');
        
        subElements.forEach(el => {
          el.style.display = detailsVisible ? 'block' : 'none';
        });
        
        toggleDetailsBtn.textContent = detailsVisible ? 'Hide Details' : 'Show Details';
      });

      function rectCenter(el){
        const r = el.getBoundingClientRect();
        const parentR = chart.getBoundingClientRect();
        return {
          x: r.left - parentR.left + r.width/2,
          y: r.top - parentR.top + r.height/2,
        };
      }

      function cubicPath(a,b){
        const dx = Math.abs(b.x - a.x);
        const offset = Math.max(60, dx * 0.25);
        const c1 = `${a.x},${a.y + 40}`;
        const c2 = `${b.x},${b.y - 40}`;
        return `M ${a.x},${a.y} C ${c1} ${c2} ${b.x},${b.y}`;
      }

      function draw(){
        pathsGroup.innerHTML = '';
        edges.forEach(([from,to]) => {
          const A = rectCenter(byId[from]);
          const B = rectCenter(byId[to]);
          // attach from bottom of A to top of B
          A.y = A.y + byId[from].offsetHeight/2;
          B.y = B.y - byId[to].offsetHeight/2;
          const path = document.createElementNS('http://www.w3.org/2000/svg','path');
          path.setAttribute('d', cubicPath(A,B));
          path.style.opacity = 0;
          // animated stroke drawing
          const len = 1200;
          path.setAttribute('stroke-dasharray', len);
          path.setAttribute('stroke-dashoffset', len);
          pathsGroup.appendChild(path);
          requestAnimationFrame(() => {
            path.style.transition = 'stroke-dashoffset 900ms ease, opacity 400ms ease';
            path.style.opacity = 1;
            path.setAttribute('stroke-dashoffset', '0');
          });
        });
      }

      // Zoom controls
      let scale = 1; const min = 0.7, max = 1.6, step = 0.15;
      const applyZoom = ()=> chart.style.transform = `scale(${scale})`;
      document.getElementById('zoomIn').onclick = ()=>{ scale = Math.min(max, scale+step); applyZoom(); };
      document.getElementById('zoomOut').onclick = ()=>{ scale = Math.max(min, scale-step); applyZoom(); };
      document.getElementById('zoomReset').onclick = ()=>{ scale = 1; applyZoom(); };

      // Re-draw on resize for perfect alignment
      const ro = new ResizeObserver(()=> draw()); ro.observe(chart);
      window.addEventListener('resize', draw);
      draw();

      // Drag to pan (desktop)
      let panning=false, sx=0, sy=0, ox=0, oy=0;
      const wrap = document.querySelector('.chart-wrap');
      wrap.addEventListener('pointerdown', (e)=>{ panning=true; sx=e.clientX; sy=e.clientY; wrap.style.cursor='grabbing'; ox=wrap.scrollLeft; oy=wrap.scrollTop; });
      wrap.addEventListener('pointermove', (e)=>{ if(!panning) return; wrap.scrollTo({ left: ox-(e.clientX-sx), top: oy-(e.clientY-sy) }); });
      wrap.addEventListener('pointerup', ()=>{ panning=false; wrap.style.cursor='default'; });
      wrap.style.overflow='auto';
    })();
  </script>
</body>
</html>